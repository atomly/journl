@import "../styles/blocknote.css";

/* App animations. */
@keyframes animate-text-shimmer {
  0% {
    background-position: 0% 50%;
  }

  100% {
    background-position: -200% 50%;
  }
}

@keyframes animate-chat-trigger-wiggle {
  0%,
  72%,
  100% {
    transform: rotate(0deg);
  }

  76% {
    transform: rotate(-8deg);
  }

  82% {
    transform: rotate(8deg);
  }

  88% {
    transform: rotate(-5deg);
  }

  94% {
    transform: rotate(5deg);
  }
}

.animate-chat-trigger-wiggle {
  animation: animate-chat-trigger-wiggle 2.8s ease-in-out infinite;
  transform-origin: 50% 70%;
}

.animate-text-shimmer {
  color: var(--foreground);
}

@supports ((-webkit-background-clip: text) or (background-clip: text)) {
  .animate-text-shimmer {
    background-image: linear-gradient(
      110deg,
      rgba(82, 82, 91, 0.6) 20%,
      rgba(39, 39, 42, 0.98) 45%,
      rgba(82, 82, 91, 0.6) 70%
    );
    background-size: 200% 100%;
    background-position: 0% 50%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: animate-text-shimmer 2.4s linear infinite;
  }

  .dark .animate-text-shimmer {
    background-image: linear-gradient(
      110deg,
      rgba(161, 161, 170, 0.5) 20%,
      rgba(250, 250, 250, 0.96) 45%,
      rgba(161, 161, 170, 0.5) 70%
    );
  }
}

@media (prefers-reduced-motion: reduce) {
  .animate-chat-trigger-wiggle {
    animation: none;
  }

  .animate-text-shimmer {
    animation: none;
    background-image: none;
    color: inherit;
  }
}

/* Theme toggle animations. */
::view-transition-group(root) {
  animation-timing-function: var(--expo-out);
}

::view-transition-new(root) {
  clip-path: circle(0 at 100% 0%);
  animation: reveal 0.66s;
  animation-fill-mode: both;
}

::view-transition-old(root),
.dark::view-transition-old(root) {
  animation: none;
  animation-fill-mode: both;
  z-index: -1;
}

.dark::view-transition-new(root) {
  animation: reveal 0.66s;
  animation-fill-mode: both;
}

@keyframes reveal {
  to {
    clip-path: circle(200vmax at 100% 0%);
  }
}

/*
Z-Index Hierarchy

The following is the z-index hierarchy for the app.
The only component we need to edit in this file is the overlay.
The rest of the components are set by the Tailwind CSS classes, or by our editor framework.

- Sidebar Drag Handle Tooltips/Popover (`z-index`: 6000)
- Dialog Content (Billing Modal, Auth Modal, etc.) (`z-index`: 5500)
- Dialog Overlays (Billing Modal, Auth Modal, etc.) (`z-index`: 5000)
- Header Search Modal and Overlay (`z-index`: 5000)
- Tooltips/Popover (`z-index`: 4500)
- Auth Settings Dropdown (`z-index`: 4500)
- Drawer & DrawerTrigger (with its overlay and drag handles) (`z-index`: 4500)
- Mobile Sidebar (`z-index`: 4500)
- Mobile BlockNoteFormattingBar (`z-index`: 4000)
- Editor Options/Drag Handle (`z-index`: 4000)
- Editor Options/Drag Handle Menu (`z-index`: 4000)
- Editor Toolbar (`z-index`: 3000)
- Editor AI Review (`z-index`: 3000)
- Editor Menu (`z-index`: 2000)
- Thread Composer Sources (`z-index`: 1600)
- Desktop Sidebars (`z-index`: 1500)
- StickyHeader (`z-index`: 40)
- Header (none)
- Main Content (none)
*/

/* NOTE: This affects all dialog overlays */
/* Ensure dialog content appears above the overlay */
[data-slot="dialog-content"] {
  z-index: 5500;
}

[data-slot="dialog-overlay"] {
  z-index: 5000;
}

/* Sets the z-index of the drawer's overlay */
[data-slot="drawer-overlay"] {
  z-index: 4500;
}

[data-slot="sheet-overlay"] {
  z-index: 4500;
}

/* Ensure the tooltips/popover appears above the sidebar */
[data-radix-popper-content-wrapper] {
  z-index: 4500 !important;
}

/* Ensure the editor options menu appears above the sidebar */
.bn-container > div[data-floating-ui-focusable] {
  z-index: 4000 !important;
}

/* On mobile... */
@media (max-width: 768px) {
  /* Sets the z-index of the sidebar and its overlay */
  [data-slot="sidebar"] {
    z-index: 4500;
  }

  /* Hide the editor's AI suggestion menu key shortcut elements */
  div#bn-suggestion-menu > div[role="option"] > div[data-position="right"] {
    display: none;
  }
}

/* Tanstack Query Devtools */
.tsqd-parent-container {
  border: 1px solid var(--border) !important;
}
.tsqd-main-panel {
  background: transparent !important;
}
.tsqd-queries-container {
  border-radius: 1rem !important;
}
